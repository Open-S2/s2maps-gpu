"use strict";(this.webpackChunk=this.webpackChunk||[]).push([[212],{212:(t,e,i)=>{i.r(e),i.d(e,{default:()=>p});var o=i(53);const a={source:"precision highp float;attribute vec2 aA;attribute vec2 aB;attribute vec3 aC;varying vec2 aD;varying float aE;varying vec4 aF;varying float aG;varying vec4 aH;varying float aHWidth;uniform bool uJ;uniform float uK;uniform vec4 uL;uniform vec2 uM;uniform vec4 uN;uniform float uO;uniform vec4 uP;uniform float uQ;uniform float uR;uniform float uS[6];uniform vec4 uT;uniform vec4 uU;uniform mat4 uV;float STtoUV(float s){if(s>=0.5) return(1./3.)*(4.*s*s-1.);else return(1./3.)*(1.-4.*(1.-s)*(1.-s));}vec4 STtoXYZ(in vec2 st){st/=8192.;int face=int(uS[0]);vec3 xyz;vec2 uv=vec2(STtoUV(uS[2]*st.x+uS[3]),STtoUV(uS[4]*st.y+uS[5]) );if(face==0) xyz=vec3(uv.x,uv.y,1.);else if(face==1) xyz=vec3(1.,uv.y,-uv.x);else if(face==2) xyz=vec3(-uv.y,1.,-uv.x);else if(face==3) xyz=vec3(-uv.y,-uv.x,-1.);else if(face==4) xyz=vec3(-1.,-uv.x,uv.y);else xyz=vec3(uv.x,-1.,uv.y);xyz=normalize(xyz)*6371.0088;return vec4(xyz,1.);}vec4 getPosLocal(in vec2 pos){pos/=8192.;vec2 deltaBottom=uT.zw-uT.xy;vec2 deltaTop=uU.zw-uU.xy;vec2 bottomPosS=uT.xy+deltaBottom*pos.x;vec2 topPosS=uU.xy+deltaTop*pos.x;vec2 deltaS=topPosS-bottomPosS;vec2 res=bottomPosS+deltaS*pos.y;return vec4(res,0.,1.);}vec4 getPos(in vec2 pos){if(uS[1]<12.){return uV*STtoXYZ(pos);}else{return getPosLocal(pos);}}vec4 getZero(){if(uS[1]<12.){return uV*vec4(0.,0.,0.,1.);}else{return vec4(0.,0.,1.,1.);}}void main(){if(aB.x<uL.x||aB.x>uL.z||aB.y<uL.y||aB.y>uL.w) return;aF=uN;aG=uO*uK;aH=uP;aHWidth=uQ*uK;float opacity;if(!uJ){opacity=uR;aF.rgb*=aF.a;aF.rgba*=opacity;aH.rgba*=opacity;}else{opacity=1.;aF=vec4(aC,1.);}vec4 glPos=getPos(aB);vec4 zero=getZero();glPos.xyz/=glPos.w;zero.xyz/=zero.w;if(glPos.z>zero.z) aF.a=0.;glPos.z=0.;glPos.w=1.;glPos.xy+=aA*(aG+aHWidth)/uM;aD=aA;aE=-1./((aG+aHWidth)/uK);gl_Position=glPos;}",uniforms:{uInteractive:"uJ",uDevicePixelRatio:"uK",uBounds:"uL",uAspect:"uM",uColor:"uN",uRadius:"uO",uStroke:"uP",uSWidth:"uQ",uOpacity:"uR",uFaceST:"uS",uBottom:"uT",uTop:"uU",uMatrix:"uV"},attributes:{aExtent:"aA",aPos:"aB",aID:"aC",extent:"aD",antialiasFactor:"aE",color:"aF",radius:"aG",stroke:"aH",strokeWidth:"aI"}},n={source:"precision highp float;varying vec2 aD;varying float aE;varying vec4 aF;varying float aG;varying vec4 aH;varying float aHWidth;uniform bool uJ;void main(){if(aF.a<0.01) discard;float aDLength=length(aD);float opacityT=smoothstep(0.,aE,aDLength-1.);if(opacityT<0.01) discard;if(uJ && opacityT !=1.) discard;float aFT=aHWidth<0.01?0.:smoothstep(aE,0.,aDLength-aG/(aG+aHWidth) );gl_FragColor=opacityT*mix(aF,aH,aFT);}",uniforms:{uInteractive:"uJ"},attributes:{extent:"aD",antialiasFactor:"aE",color:"aF",radius:"aG",stroke:"aH",strokeWidth:"aI"}},r={source:"#version 300 es\nprecision highp float;layout(location=0) in vec2 aA;layout(location=1) in vec2 aB;layout(location=6) in vec3 aC;out vec2 aD;out float aE;out vec4 aF;out float aG;out vec4 aH;out float aHWidth;uniform bool uJ;uniform float uK;uniform vec4 uL;uniform vec2 uM;uniform float uN[16];uniform float uO[128];uniform float uP[64];uniform float uQ;uniform bool uR;vec4 LCH2LAB(in vec4 lch){float h=lch.b*(3.1415926538/180.);return vec4(lch.r,cos(h)*lch.g,sin(h)*lch.g,lch.a );}float LAB2XYZ(in float t){return t>0.206896552?t*t*t:0.12841855*(t-0.137931034);}float XYZ2RGB(in float r){return 255.*(r<=0.00304?12.92*r:1.055*pow(r,1./2.4)-0.055);}vec4 LAB2RGB(in vec4 lab){float x,y,z,r,g,b;y=(lab.r+16.)/116.;x=y+lab.g/500.;z=y-lab.b/200.;x=0.950470*LAB2XYZ(x);y=1.*LAB2XYZ(y);z=1.088830*LAB2XYZ(z);r=XYZ2RGB(3.2404542*x-1.5371385*y-0.4985314*z);g=XYZ2RGB(-0.9692660*x+1.8760108*y+0.0415560*z);b=XYZ2RGB(0.0556434*x-0.2040259*y+1.0572252*z);if(r<0.) r=0.;else if(r>255.) r=255.;if(g<0.) g=0.;else if(g>255.) g=255.;if(b<0.) b=0.;else if(b>255.) b=255.;return vec4(r,g,b,lab.a);}vec4 LCH2RGB(in vec4 lch){vec4 res;res=LCH2LAB(lch);res=LAB2RGB(res);res.r/=255.;res.g/=255.;res.b/=255.;return res;}vec4 aFBlindAdjust(in vec4 rgba,in float aFMode){float r=rgba.r*255.;float g=rgba.g*255.;float b=rgba.b*255.;float CVD[9];if(aFMode==1.) CVD=float[9](0.0,2.02344,-2.52581,0.,1.,0.,0.,0.,1.);else if(aFMode==2.) CVD=float[9](1.0,0.,0.,0.494207,0.,1.24827,0.,0.,1.);else CVD=float[9](1.0,0.,0.,0.,1.0,0.,-0.395913,0.801109,0.);float L=(17.8824*r)+(43.5161*g)+(4.11935*b);float M=(3.45565*r)+(27.1554*g)+(3.86714*b);float S=(0.0299566*r)+(0.184309*g)+(1.46709*b);float l=(CVD[0]*L)+(CVD[1]*M)+(CVD[2]*S);float m=(CVD[3]*L)+(CVD[4]*M)+(CVD[5]*S);float s=(CVD[6]*L)+(CVD[7]*M)+(CVD[8]*S);float R=(0.0809444479*l)+(-0.130504409*m)+(0.116721066*s);float G=(-0.0102485335*l)+(0.0540193266*m)+(-0.113614708*s);float B=(-0.000365296938*l)+(-0.00412161469*m)+(0.693511405*s);R=r-R;G=g-G;B=b-B;float GG=(0.7*R)+(1.0*G);float BB=(0.7*R)+(1.0*B);return vec4(clamp(r,0.,255.)/255.,clamp(GG+g,0.,255.)/255.,clamp(BB+b,0.,255.)/255.,rgba.a );}float exponentialInterpolation(float inputVal,float start,float end,float base){float diff=end-start;if(diff==0.) return 0.;if(base<=0.) base=0.1;else if(base>2.) base=2.;float progress=inputVal-start;if(base==1.) return progress/diff;return(pow(base,progress)-1.)/(pow(base,diff)-1.);}vec4 interpolateColor(vec4 aF1,vec4 aF2,float t){if(t==0.) return aF1;else if(t==1.) return aF2;float sat,hue,lbv,dh,alpha;if(uR){if(aF2[0]>aF1[0] && aF2[0]-aF1[0]>180.) dh=aF2[0]-aF1[0]+360.;else if(aF2[0]<aF1[0] && aF1[0]-aF2[0]>180.) dh=aF2[0]+360.-aF1[0];else dh=aF2[0]-aF1[0];hue=aF1[0]+t*dh;}else{hue=aF1[0]+t*(aF2[0]-aF1[0]);}sat=aF1[1]+t*(aF2[1]-aF1[1]);lbv=aF1[2]+t*(aF2[2]-aF1[2]);alpha=aF1[3]+t*(aF2[3]-aF1[3]);return vec4(hue,sat,lbv,alpha);}vec4 decodeFeature(bool aF,inout int index,inout int featureIndex){int decodeOffset=index;int startingOffset=index;int featureSize=int(uO[index])>>10;vec4 res=vec4(-1,-1,-1,-1);int conditionStack[6];float tStack[6];int stackIndex=1;conditionStack[0]=index;int len,conditionSet,condition;do{stackIndex--;startingOffset=index=conditionStack[stackIndex];conditionSet=int(uO[index]);len=conditionSet>>10;condition=(conditionSet & 1008)>>4;index++;if(condition==0){}else if(condition==1){if(res[0]==-1.){for(int i=0;i<len-1;i++) res[i]=uO[index+i];}else{if(aF){vec4 val=vec4(uO[index],uO[index+1],uO[index+2],uO[index+3]);res=interpolateColor(res,val,tStack[stackIndex]);}else{for(int i=0;i<len-1;i++) res[i]=res[i]+tStack[stackIndex]*(uO[index+i]-res[i]);}}}else if(condition==2||condition==3){float inputVal,conditionInput;if(condition==2){inputVal=uP[featureIndex];featureIndex++;}else{inputVal=uN[(conditionSet & 14)>>1];}conditionInput=uO[index];while(inputVal !=conditionInput){index+=(int(uO[index+1])>>10)+1;conditionInput=uO[index];if(conditionInput==0.) break;}index++;conditionStack[stackIndex]=index;tStack[stackIndex]=1.;stackIndex++;}else if(condition==4||condition==5){int interpolationType=conditionSet & 1;int inputType=(conditionSet & 14)>>1;float base=1.;if(interpolationType==1){base=uO[index];index++;}float inputVal,start,end;int startIndex,endIndex,subCondition;if(condition==4){inputVal=uP[featureIndex];featureIndex++;}else{inputVal=uN[inputType];}start=end=uO[index];startIndex=endIndex=index+1;while(end<inputVal && endIndex<len+startingOffset){subCondition=(int(uO[startIndex]) & 1008)>>4;if(subCondition==2||subCondition==4) featureIndex++;index++;index+=int(uO[index])>>10;start=end;startIndex=endIndex;endIndex=index+1;if(endIndex<len+startingOffset) end=uO[index];}if(startIndex==endIndex){conditionStack[stackIndex]=startIndex;tStack[stackIndex]=1.;if(stackIndex>0) tStack[stackIndex]=tStack[stackIndex-1];stackIndex++;}else if(end==inputVal){conditionStack[stackIndex]=endIndex;tStack[stackIndex]=1.;if(stackIndex>0) tStack[stackIndex]=tStack[stackIndex-1];stackIndex++;}else{float t=exponentialInterpolation(inputVal,start,end,base);conditionStack[stackIndex]=startIndex;tStack[stackIndex]=1.-t;stackIndex++;conditionStack[stackIndex]=endIndex;tStack[stackIndex]=t;stackIndex++;}while(endIndex<len+startingOffset){subCondition=(int(uO[startIndex]) & 1008)>>4;if(subCondition==2||subCondition==4) featureIndex++;index++;index+=int(uO[index])>>10;endIndex=index+1;}}else if(condition==6){res=vec4(0.,0.,0.,1.);return res;}else if(condition==7){}if(stackIndex>5){index=featureSize+decodeOffset;if(aF && uR) res=LCH2RGB(res);return res;}}while(stackIndex>0);index=featureSize+decodeOffset;if(aF && uR) res=LCH2RGB(res);if(aF && uQ !=0.) res=aFBlindAdjust(res,uQ);return res;}uniform float uT[6];uniform vec4 uU;uniform vec4 uV;uniform mat4 uW;float STtoUV(float s){if(s>=0.5) return(1./3.)*(4.*s*s-1.);else return(1./3.)*(1.-4.*(1.-s)*(1.-s));}vec4 STtoXYZ(in vec2 st){st/=8192.;int face=int(uT[0]);vec3 xyz;vec2 uv=vec2(STtoUV(uT[2]*st.x+uT[3]),STtoUV(uT[4]*st.y+uT[5]) );if(face==0) xyz=vec3(uv.x,uv.y,1.);else if(face==1) xyz=vec3(1.,uv.y,-uv.x);else if(face==2) xyz=vec3(-uv.y,1.,-uv.x);else if(face==3) xyz=vec3(-uv.y,-uv.x,-1.);else if(face==4) xyz=vec3(-1.,-uv.x,uv.y);else xyz=vec3(uv.x,-1.,uv.y);xyz=normalize(xyz)*6371.0088;return vec4(xyz,1.);}vec4 getPosLocal(in vec2 pos){pos/=8192.;vec2 deltaBottom=uU.zw-uU.xy;vec2 deltaTop=uV.zw-uV.xy;vec2 bottomPosS=uU.xy+deltaBottom*pos.x;vec2 topPosS=uV.xy+deltaTop*pos.x;vec2 deltaS=topPosS-bottomPosS;vec2 res=bottomPosS+deltaS*pos.y;return vec4(res,0.,1.);}vec4 getPos(in vec2 pos){if(uT[1]<12.){return uW*STtoXYZ(pos);}else{return getPosLocal(pos);}}vec4 getZero(){if(uT[1]<12.){return uW*vec4(0.,0.,0.,1.);}else{return vec4(0.,0.,1.,1.);}}void main(){if(aB.x<uL.x||aB.x>uL.z||aB.y<uL.y||aB.y>uL.w) return;int index=0;int featureIndex=0;aF=decodeFeature(true,index,featureIndex);aG=decodeFeature(false,index,featureIndex)[0]*uK;aH=decodeFeature(true,index,featureIndex);aHWidth=decodeFeature(false,index,featureIndex)[0]*uK;float opacity;if(!uJ){opacity=decodeFeature(false,index,featureIndex)[0];aF.rgb*=aF.a;aF.rgba*=opacity;aH.rgba*=opacity;}else{opacity=1.;aF=vec4(aC,1.);aH=aF;}vec4 glPos=getPos(aB);vec4 zero=getZero();glPos.xyz/=glPos.w;zero.xyz/=zero.w;if(glPos.z>zero.z) aF.a=0.;glPos.z=0.;glPos.w=1.;glPos.xy+=aA*(aG+aHWidth)/uM;aD=aA;aE=-1./((aG+aHWidth)/uK);gl_Position=glPos;}",uniforms:{uInteractive:"uJ",uDevicePixelRatio:"uK",uBounds:"uL",uAspect:"uM",uInputs:"uN",uLayerCode:"uO",uFeatureCode:"uP",uColorBlind:"uQ",uLCH:"uR",uFaceST:"uT",uBottom:"uU",uTop:"uV",uMatrix:"uW"},attributes:{aExtent:"aA",aPos:"aB",aID:"aC",extent:"aD",antialiasFactor:"aE",color:"aF",radius:"aG",stroke:"aH",strokeWidth:"aI",colorMode:"aS"}},u={source:"#version 300 es\nprecision highp float;in vec2 aD;in float aE;in vec4 aF;in float aG;in vec4 aH;in float aHWidth;out vec4 aX;uniform bool uJ;void main(){if(aF.a<0.01) discard;float aDLength=length(aD);float opacityT=smoothstep(0.,aE,aDLength-1.);if(opacityT<0.01) discard;if(uJ && opacityT !=1.) discard;float aFT=aHWidth<0.01?0.:smoothstep(aE,0.,aDLength-aG/(aG+aHWidth) );aX=opacityT*mix(aF,aH,aFT);}",uniforms:{uInteractive:"uJ"},attributes:{extent:"aD",antialiasFactor:"aE",color:"aF",radius:"aG",stroke:"aH",strokeWidth:"aI",fragColor:"aX"}};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function l(t,e){return l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},l(t,e)}function f(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},v(t)}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&l(t,e)}(y,t);var e,i,o,s,p=(o=y,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=v(o);if(s){var i=v(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return f(this,t)});function y(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var i=t.gl,o=t.type,s=t.devicePixelRatio;return 1===o&&(i.attributeLocations={aExtent:0,aPos:1,aID:6}),h(d(e=p.call(this,t)),"uColors",void 0),h(d(e),"uRadius",void 0),h(d(e),"uStroke",void 0),h(d(e),"uSWidth",void 0),h(d(e),"uOpacity",void 0),h(d(e),"uBounds",void 0),h(d(e),"defaultBounds",new Float32Array([0,0,8192,8192])),1===o?e.buildShaders(a,n):e.buildShaders(r,u),e.use(),e.setDevicePixelRatio(s),e}return e=y,(i=[{key:"draw",value:function(t,e){var i=this.gl,o=this.context,a=this.defaultBounds,n=this.uColor,r=this.uRadius,u=this.uStroke,s=this.uSWidth,c=this.uOpacity,l=this.uBounds,f=o.type,d=t.count,v=t.featureCode,h=t.depthPos,p=t.color,y=t.radius,x=t.stroke,g=t.strokeWidth,b=t.opacity,m=t.offset,S=t.mode,I=t.bounds;o.defaultBlend(),o.enableDepthTest(),o.stencilFuncAlways(0),o.lequalDepth(),o.setDepthRange(h),I?i.uniform4fv(l,I):i.uniform4fv(l,a),1===f?(i.uniform4fv(n,p,0,p.length),i.uniform1f(r,y),i.uniform4fv(u,x,0,x.length),i.uniform1f(s,g),i.uniform1f(c,b)):this.setFeatureCode(v),i.bindBuffer(i.ARRAY_BUFFER,e.vertexBuffer),i.vertexAttribPointer(1,2,i.SHORT,!1,4,4*m),i.drawArraysInstanced(S||i.TRIANGLES,0,6,d)}}])&&c(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),y}(o.Z)},53:(t,e,i)=>{function o(t,e,i){var o=t.createShader(i);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);return console.log("*** Error compiling shader '".concat(o,"': ").concat(a)),t.deleteShader(o),null}return o}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,o)}return i}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function u(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:()=>c});var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"vertexShader",void 0),s(this,"fragmentShader",void 0),s(this,"radii",!1),s(this,"context",void 0),s(this,"gl",void 0),s(this,"glProgram",void 0),s(this,"uMatrix",void 0),s(this,"uAspect",void 0),s(this,"uMode",void 0),s(this,"u3D",void 0),s(this,"uLCH",void 0),s(this,"uInteractive",void 0),s(this,"uFaceST",void 0),s(this,"uBottom",void 0),s(this,"uTop",void 0),s(this,"uInputs",void 0),s(this,"uLayerCode",void 0),s(this,"uFeatureCode",void 0),s(this,"uDevicePixelRatio",void 0),s(this,"updateColorBlindMode","none"),s(this,"updateMatrix",null),s(this,"updateInputs",null),s(this,"updateAspect",null),s(this,"curMode",-1),s(this,"threeD",void 0),s(this,"LCH",void 0),s(this,"colorBlind",void 0),s(this,"interactive",void 0),this.context=e;var i=e.gl;this.gl=i,this.glProgram=i.createProgram()}var e,i;return e=t,i=[{key:"buildShaders",value:function(t,e){var i=this.gl,a=this.glProgram;this.setupAttributes(t.attributes);var n=this.vertexShader=o(i,t.source,i.VERTEX_SHADER),u=this.fragmentShader=o(i,e.source,i.FRAGMENT_SHADER);if(!n||!u)throw Error("missing shaders");if(i.attachShader(a,n),i.attachShader(a,u),i.linkProgram(a),!i.getProgramParameter(a,i.LINK_STATUS))throw Error(i.getProgramInfoLog(a));this.setupUniforms(r(r({},t.uniforms),e.uniforms))}},{key:"setupUniforms",value:function(t){for(var e=this.gl,i=this.glProgram,o=0,n=Object.entries(t);o<n.length;o++){var r=(c=n[o],l=2,function(t){if(Array.isArray(t))return t}(c)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var o,a,n=[],r=!0,u=!1;try{for(i=i.call(t);!(r=(o=i.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){u=!0,a=t}finally{try{r||null==i.return||i.return()}finally{if(u)throw a}}return n}}(c,l)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(t,e):void 0}}(c,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=r[0],s=r[1];this[u]=e.getUniformLocation(i,s)}var c,l}},{key:"setupAttributes",value:function(t){var e=this.gl,i=this.glProgram,o=e.attributeLocations;if(o)for(var a in o)e.bindAttribLocation(i,o[a],t[a])}},{key:"delete",value:function(){var t=this.gl,e=this.vertexShader,i=this.fragmentShader;t.deleteShader(e),t.deleteShader(i)}},{key:"use",value:function(){var t=this.gl,e=this.glProgram;t.useProgram(e),this.flush()}},{key:"injectFrameUniforms",value:function(t,e,i){this.updateMatrix=t,this.updateInputs=e,this.updateAspect=i}},{key:"flush",value:function(){this.updateColorBlindMode&&this.setColorBlindMode(this.updateColorBlindMode),this.updateMatrix&&this.setMatrix(this.updateMatrix),this.updateInputs&&this.setInputs(this.updateInputs),this.updateAspect&&this.setAspect(this.updateAspect)}},{key:"setDevicePixelRatio",value:function(t){this.gl.uniform1f(this.uDevicePixelRatio,t)}},{key:"setColorBlindMode",value:function(t){this.gl.uniform1f(this.uColorBlind,"protanopia"===t?1:"deutranopia"===t?2:"tritanopia"===t?3:0),this.updateColorBlindMode=null}},{key:"setMatrix",value:function(t){this.gl.uniformMatrix4fv(this.uMatrix,!1,t),this.updateMatrix=null}},{key:"setInputs",value:function(t){this.gl.uniform1fv(this.uInputs,t,0,t.length),this.updateInputs=null}},{key:"setAspect",value:function(t){this.uAspect&&this.gl.uniform2fv(this.uAspect,t),this.updateAspect=null}},{key:"setFaceST",value:function(t){this.gl.uniform1fv(this.uFaceST,t,0,t.length)}},{key:"setTilePos",value:function(t,e){t&&this.gl.uniform4fv(this.uBottom,t,0,4),e&&this.gl.uniform4fv(this.uTop,e,0,4)}},{key:"setLayerCode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.gl;t.length&&i.uniform1fv(this.uLayerCode,t,0,t.length),this.uLCH&&this.LCH!==e&&(this.LCH=e,i.uniform1i(this.uLCH,~~e))}},{key:"setInteractive",value:function(t){var e=this.gl;this.interactive!==t&&(this.interactive=t,e.uniform1i(this.uInteractive,t))}},{key:"setFeatureCode",value:function(t){t&&t.length&&this.gl.uniform1fv(this.uFeatureCode,t)}},{key:"set3D",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.u3D&&this.threeD!==t&&(this.threeD=t,this.gl.uniform1i(this.u3D,t))}},{key:"setMode",value:function(t){this.uMode&&this.curMode!==t&&(this.curMode=t,this.gl.uniform1i(this.uMode,t))}},{key:"draw",value:function(t){}}],i&&u(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()}}]);