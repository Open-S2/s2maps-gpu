"use strict";(this.webpackChunk=this.webpackChunk||[]).push([[963],{53:(t,e,o)=>{function r(t,e,o){var r=t.createShader(o);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var i=t.getShaderInfoLog(r);return console.log("*** Error compiling shader '".concat(r,"': ").concat(i)),t.deleteShader(r),null}return r}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}function n(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function u(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?n(Object(o),!0).forEach((function(e){s(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):n(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function a(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}o.d(e,{Z:()=>l});var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),s(this,"vertexShader",void 0),s(this,"fragmentShader",void 0),s(this,"radii",!1),s(this,"context",void 0),s(this,"gl",void 0),s(this,"glProgram",void 0),s(this,"uMatrix",void 0),s(this,"uAspect",void 0),s(this,"uMode",void 0),s(this,"u3D",void 0),s(this,"uLCH",void 0),s(this,"uInteractive",void 0),s(this,"uFaceST",void 0),s(this,"uBottom",void 0),s(this,"uTop",void 0),s(this,"uInputs",void 0),s(this,"uLayerCode",void 0),s(this,"uFeatureCode",void 0),s(this,"uDevicePixelRatio",void 0),s(this,"updateColorBlindMode","none"),s(this,"updateMatrix",null),s(this,"updateInputs",null),s(this,"updateAspect",null),s(this,"curMode",-1),s(this,"threeD",void 0),s(this,"LCH",void 0),s(this,"colorBlind",void 0),s(this,"interactive",void 0),this.context=e;var o=e.gl;this.gl=o,this.glProgram=o.createProgram()}var e,o;return e=t,o=[{key:"buildShaders",value:function(t,e){var o=this.gl,i=this.glProgram;this.setupAttributes(t.attributes);var n=this.vertexShader=r(o,t.source,o.VERTEX_SHADER),a=this.fragmentShader=r(o,e.source,o.FRAGMENT_SHADER);if(!n||!a)throw Error("missing shaders");if(o.attachShader(i,n),o.attachShader(i,a),o.linkProgram(i),!o.getProgramParameter(i,o.LINK_STATUS))throw Error(o.getProgramInfoLog(i));this.setupUniforms(u(u({},t.uniforms),e.uniforms))}},{key:"setupUniforms",value:function(t){for(var e=this.gl,o=this.glProgram,r=0,n=Object.entries(t);r<n.length;r++){var u=(l=n[r],c=2,function(t){if(Array.isArray(t))return t}(l)||function(t,e){var o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var r,i,n=[],u=!0,a=!1;try{for(o=o.call(t);!(u=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);u=!0);}catch(t){a=!0,i=t}finally{try{u||null==o.return||o.return()}finally{if(a)throw i}}return n}}(l,c)||function(t,e){if(t){if("string"==typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=u[0],s=u[1];this[a]=e.getUniformLocation(o,s)}var l,c}},{key:"setupAttributes",value:function(t){var e=this.gl,o=this.glProgram,r=e.attributeLocations;if(r)for(var i in r)e.bindAttribLocation(o,r[i],t[i])}},{key:"delete",value:function(){var t=this.gl,e=this.vertexShader,o=this.fragmentShader;t.deleteShader(e),t.deleteShader(o)}},{key:"use",value:function(){var t=this.gl,e=this.glProgram;t.useProgram(e),this.flush()}},{key:"injectFrameUniforms",value:function(t,e,o){this.updateMatrix=t,this.updateInputs=e,this.updateAspect=o}},{key:"flush",value:function(){this.updateColorBlindMode&&this.setColorBlindMode(this.updateColorBlindMode),this.updateMatrix&&this.setMatrix(this.updateMatrix),this.updateInputs&&this.setInputs(this.updateInputs),this.updateAspect&&this.setAspect(this.updateAspect)}},{key:"setDevicePixelRatio",value:function(t){this.gl.uniform1f(this.uDevicePixelRatio,t)}},{key:"setColorBlindMode",value:function(t){this.gl.uniform1f(this.uColorBlind,"protanopia"===t?1:"deutranopia"===t?2:"tritanopia"===t?3:0),this.updateColorBlindMode=null}},{key:"setMatrix",value:function(t){this.gl.uniformMatrix4fv(this.uMatrix,!1,t),this.updateMatrix=null}},{key:"setInputs",value:function(t){this.gl.uniform1fv(this.uInputs,t,0,t.length),this.updateInputs=null}},{key:"setAspect",value:function(t){this.uAspect&&this.gl.uniform2fv(this.uAspect,t),this.updateAspect=null}},{key:"setFaceST",value:function(t){this.gl.uniform1fv(this.uFaceST,t,0,t.length)}},{key:"setTilePos",value:function(t,e){t&&this.gl.uniform4fv(this.uBottom,t,0,4),e&&this.gl.uniform4fv(this.uTop,e,0,4)}},{key:"setLayerCode",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.gl;t.length&&o.uniform1fv(this.uLayerCode,t,0,t.length),this.uLCH&&this.LCH!==e&&(this.LCH=e,o.uniform1i(this.uLCH,~~e))}},{key:"setInteractive",value:function(t){var e=this.gl;this.interactive!==t&&(this.interactive=t,e.uniform1i(this.uInteractive,t))}},{key:"setFeatureCode",value:function(t){t&&t.length&&this.gl.uniform1fv(this.uFeatureCode,t)}},{key:"set3D",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.u3D&&this.threeD!==t&&(this.threeD=t,this.gl.uniform1i(this.u3D,t))}},{key:"setMode",value:function(t){this.uMode&&this.curMode!==t&&(this.curMode=t,this.gl.uniform1i(this.uMode,t))}},{key:"draw",value:function(t){}}],o&&a(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),t}()},963:(t,e,o)=>{o.r(e),o.d(e,{default:()=>p});var r=o(53);const i={source:"precision highp float;attribute vec2 aA;varying vec2 aB;void main(){aB=aA;gl_Position=vec4(aA,1.,1.);}",uniforms:{},attributes:{aPos:"aA",vertPos:"aB"}},n={source:"precision highp float;varying vec2 aB;uniform vec2 uC;uniform vec4 uD;uniform vec4 uE;uniform vec4 uF;uniform vec4 uG;void main(){vec2 pos=aB;pos*=0.065/uC;float fade1=length(pos);float fade2=fade1;float haloSmooth=fade1;fade1=smoothstep(0.15,1.,1.0-fade1);fade2=smoothstep(0.55,1.,1.0-fade2);haloSmooth=smoothstep(0.77,0.825,1.0-haloSmooth);vec4 color=vec4(1.0);color=mix(uD,uF,fade1);color=mix(color,uE,haloSmooth);color=mix(color,uG,fade2);gl_FragColor=color;}",uniforms:{uScale:"uC",uBackgroundColor:"uD",uHaloColor:"uE",uFade1Color:"uF",uFade2Color:"uG"},attributes:{vertPos:"aB"}},u={source:"#version 300 es\nprecision highp float;in vec2 aH;out vec2 aA;void main(){aA=aH;gl_Position=vec4(aH,1.,1.);}",uniforms:{},attributes:{aPos:"aH",vertPos:"aA"}},a={source:"#version 300 es\nprecision highp float;in vec2 aA;out vec4 aB;uniform vec2 uC;uniform vec4 uD;uniform vec4 uE;uniform vec4 uF;uniform vec4 uG;void main(){vec2 pos=aA;pos*=0.065/uC;float fade1=length(pos);float fade2=fade1;float haloSmooth=fade1;fade1=smoothstep(0.15,1.,1.0-fade1);fade2=smoothstep(0.55,1.,1.0-fade2);haloSmooth=smoothstep(0.77,0.825,1.0-haloSmooth);vec4 color=vec4(1.0);color=mix(uD,uF,fade1);color=mix(color,uE,haloSmooth);color=mix(color,uG,fade2);aB=color;}",uniforms:{uScale:"uC",uBackgroundColor:"uD",uHaloColor:"uE",uFade1Color:"uF",uFade2Color:"uG"},attributes:{vertPos:"aA",fragColor:"aB"}};function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function l(t,e){for(var o=0;o<e.length;o++){var r=e[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function f(t,e){if(e&&("object"===s(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return h(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}function v(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var p=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(t,"prototype",{value:Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),writable:!1}),e&&c(t,e)}(m,t);var e,o,r,s,p=(r=m,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(s){var o=d(this).constructor;t=Reflect.construct(e,arguments,o)}else t=e.apply(this,arguments);return f(this,t)});function m(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,m);var o=t.type;return v(h(e=p.call(this,t)),"aPos",void 0),v(h(e),"uScale",void 0),v(h(e),"uBackgroundColor",void 0),v(h(e),"uHaloColor",void 0),v(h(e),"uFade1Color",void 0),v(h(e),"uFade2Color",void 0),1===o?e.buildShaders(i,n):e.buildShaders(u,a),e}return e=m,(o=[{key:"draw",value:function(t){var e=this.context,o=this.gl;e.wallpaperState();var r=t.getUniforms();r&&(o.uniform2fv(this.uScale,r.uScale),o.uniform4fv(this.uBackgroundColor,r.uBackgroundColor),o.uniform4fv(this.uFade1Color,r.uFade1Color),o.uniform4fv(this.uFade2Color,r.uFade2Color),o.uniform4fv(this.uHaloColor,r.uHaloColor)),e.drawQuad()}}])&&l(e.prototype,o),Object.defineProperty(e,"prototype",{writable:!1}),m}(r.Z)}}]);