(()=>{var e,t={840:(e,t,r)=>{e.exports=r(874)},874:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var o=function(e){"use strict";var t,r=Object.prototype,o=r.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function l(e,t,r,n){var o=t&&t.prototype instanceof m?t:m,i=Object.create(o.prototype),a=new O(n||[]);return i._invoke=function(e,t,r){var n=f;return function(o,i){if(n===v)throw new Error("Generator is already running");if(n===h){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=E(a,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===f)throw n=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=v;var c=d(e,t,r);if("normal"===c.type){if(n=r.done?h:p,c.arg===y)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=h,r.method="throw",r.arg=c.arg)}}}(e,r,a),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var f="suspendedStart",p="suspendedYield",v="executing",h="completed",y={};function m(){}function g(){}function w(){}var b={};u(b,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(j([])));_&&_!==r&&o.call(_,a)&&(b=_);var M=w.prototype=m.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(i,a,s,c){var u=d(e[i],e,a);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"===n(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,c)}),(function(e){r("throw",e,s,c)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return r("throw",e,s,c)}))}c(u.arg)}var i;this._invoke=function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return i=i?i.then(o,o):o()}}function E(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method))return y;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,y;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function j(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function r(){for(;++n<e.length;)if(o.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}return{next:P}}function P(){return{value:t,done:!0}}return g.prototype=w,u(M,"constructor",w),u(w,"constructor",g),g.displayName=u(w,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,w):(e.__proto__=w,u(e,c,"GeneratorFunction")),e.prototype=Object.create(M),e},e.awrap=function(e){return{__await:e}},C(L.prototype),u(L.prototype,s,(function(){return this})),e.AsyncIterator=L,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new L(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(M),u(M,c,"Generator"),u(M,a,(function(){return this})),u(M,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=j,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=o.call(a,"catchLoc"),u=o.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:j(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),y}},e}("object"===n(e=r.nmd(e))?e.exports:{});try{regeneratorRuntime=o}catch(e){"object"===("undefined"==typeof globalThis?"undefined":n(globalThis))?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,n),i.loaded=!0,i.exports}n.m=t,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>(({13:"source-worker",136:"tile-worker",875:"map-worker"}[e]||e)+".min.js"),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},n.l=(t,r,o,i)=>{if(e[t])e[t].push(r);else{var a,s;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var l=c[u];if(l.getAttribute("src")==t){a=l;break}}a||(s=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=t),e[t]=[r];var d=(r,n)=>{a.onerror=a.onload=null,clearTimeout(f);var o=e[t];if(delete e[t],a.parentNode&&a.parentNode.removeChild(a),o&&o.forEach((e=>e(n))),r)return r(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),s&&document.head.appendChild(a)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="http://localhost:3000/s2maps-gl/v0.3.3-dev/",(()=>{n.b=document.baseURI||self.location.href;var e={514:0,840:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise(((r,n)=>o=e[t]=[r,n]));r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var o,i,[a,s,c]=r,u=0;if(a.some((t=>0!==e[t]))){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);c&&c(n)}for(t&&t(r);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[a[u]]=0},r=this.webpackChunk=this.webpackChunk||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){if(r&&("object"===e(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}function r(e){var t="function"==typeof Map?new Map:void 0;return r=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,s(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,e)},r(e)}function o(e,t,r){return o=i()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&a(o,r.prototype),o},o.apply(null,arguments)}function i(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function a(e,t){return a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},a(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&a(e,t)}(u,e);var r,n,o,c=(r=u,n=i(),function(){var e,o=s(r);if(n){var i=s(this).constructor;e=Reflect.construct(o,arguments,i)}else e=o.apply(this,arguments);return t(this,e)});function u(e,r){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var o="__webpack_worker_origin__ = ".concat(JSON.stringify(e.origin)),i="importScripts(".concat(JSON.stringify(e.toString()),")"),a=URL.createObjectURL(new Blob(["".concat(o,";\n").concat(i)],{type:"application/javascript"}));return n=c.call(this,a,r),URL.revokeObjectURL(a),t(n)}return o=u,Object.defineProperty(o,"prototype",{writable:!1}),o}(r(Worker));function u(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=Math.floor((window.navigator.hardwareConcurrency||4)/2),v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"workerCount",Math.max(Math.min(p,6),2)),f(this,"workers",[]),f(this,"sourceWorker",void 0),f(this,"maps",{});var t=this.sourceWorker=new c(new URL(n.p+n.u(13),n.b),{name:"source-worker",type:void 0});t.onmessage=this._onSourceMessage.bind(this);for(var r=0;r<this.workerCount;r++){var o=new c(new URL(n.p+n.u(136),n.b),{name:"tile-worker",type:void 0});o.onmessage=this._onProcessMessage.bind(this),this.workers.push(o);var i=new MessageChannel,a=new MessageChannel;t.postMessage({type:"port",messagePort:i.port1,postPort:a.port2,id:r},[i.port1,a.port2]),o.postMessage({type:"port",messagePort:a.port1,postPort:i.port2,id:r,totalWorkers:this.workerCount},[a.port1,i.port2])}}var t,r;return t=e,(r=[{key:"_onProcessMessage",value:function(e){var t=e.data;this.maps[t.mapID].injectData(t)}},{key:"_onSourceMessage",value:function(e){var t=e.data;this.maps[t.mapID].injectData(t)}},{key:"addMap",value:function(e){this.maps[e.id]=e}},{key:"requestStyle",value:function(e,t,r,n){this.sourceWorker.postMessage({mapID:e,type:"requestStyle",style:t,analytics:n})}},{key:"injectStyle",value:function(e,t){this.sourceWorker.postMessage({mapID:e,type:"style",style:t});var r,n=u(this.workers);try{for(n.s();!(r=n.n()).done;)r.value.postMessage({mapID:e,type:"style",style:t})}catch(e){n.e(e)}finally{n.f()}}},{key:"delete",value:function(){this.sourceWorker.terminate();var t,r=u(this.workers);try{for(r.s();!(t=r.n()).done;)t.value.terminate()}catch(e){r.e(e)}finally{r.f()}window.S2WorkerPool=new e}},{key:"tileRequest",value:function(e,t,r){this.sourceWorker.postMessage({mapID:e,type:"tilerequest",tiles:t,sources:r})}},{key:"timeRequest",value:function(e,t,r){this.sourceWorker.postMessage({mapID:e,type:"timerequest",tiles:t,sourceNames:r})}},{key:"getInfo",value:function(e,t){this.sourceWorker.postMessage({mapID:e,type:"getInfo",featureID:t})}},{key:"addMarkers",value:function(e,t,r){this.sourceWorker.postMessage({mapID:e,type:"addMarkers",markers:t,sourceName:r})}},{key:"removeMarkers",value:function(e,t,r){this.sourceWorker.postMessage({mapID:e,type:"removeMarkers",ids:t,sourceName:r})}},{key:"deleteSource",value:function(e,t){this.sourceWorker.postMessage({mapID:e,type:"deleteSource",sourceNames:t})}},{key:"addLayer",value:function(e,t,r){this.sourceWorker.postMessage({mapID:e,type:"addLayer",layer:t,index:r});var n,o=u(this.workers);try{for(o.s();!(n=o.n()).done;)n.value.postMessage({mapID:e,type:"addLayer",layer:t,index:r})}catch(e){o.e(e)}finally{o.f()}}},{key:"removeLayer",value:function(e,t){this.sourceWorker.postMessage({mapID:e,type:"removeLayer",index:t});var r,n=u(this.workers);try{for(n.s();!(r=n.n()).done;)r.value.postMessage({mapID:e,type:"removeLayer",index:t})}catch(e){n.e(e)}finally{n.f()}}},{key:"reorderLayers",value:function(e,t){this.sourceWorker.postMessage({mapID:e,type:"reorderLayers",layerChanges:t});var r,n=u(this.workers);try{for(n.s();!(r=n.n()).done;)r.value.postMessage({mapID:e,type:"reorderLayers",layerChanges:t})}catch(e){n.e(e)}finally{n.f()}}}])&&d(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();window.S2WorkerPool||(window.S2WorkerPool=new v);var h=n(840),y=n.n(h),m=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);function g(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}"createImageBitmap"in window&&!m||(window.createImageBitmap=function(){var e,t=(e=y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var n=document.createElement("img");n.addEventListener("load",(function(){e(this)})),n.src=URL.createObjectURL(t),n.deleteURL=function(){URL.revokeObjectURL(this.src)}})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){g(i,n,o,a,s,"next",e)}function s(e){g(i,n,o,a,s,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}());var k=["January","February","March","April","May","June","July","August","September","October","November","December"],_=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"state","null"),b(this,"marker",void 0),b(this,"s2map",void 0),b(this,"mapContainer",void 0),b(this,"_infoCard",void 0),b(this,"_markerCard",void 0),b(this,"layers",void 0),this.s2map=t,this.mapContainer=r,this.layers=n}var t,r;return t=e,(r=[{key:"_clear",value:function(){var e=this.state;this.s2map.deleteSource("_".concat(e)),this.state="null",this._infoCard&&(this._infoCard.remove(),this._infoCard=null),this._markerCard&&(this._markerCard.remove(),this._markerCard=null)}},{key:"click",value:function(e,t,r){var n=this.s2map,o=this.layers;if(e){if(o.includes(e.__name)){this.state="info",n.getInfo(e.id),this._infoCard?(this._infoCard.skel&&this._infoCard.skel.remove(),this._infoCard._bod&&this._infoCard._bod.remove()):this._infoCard=window.document.createElement("div");var i=this._infoCard;i.infoID=e.id,i.id="s2-card",this._injectInfoSkeleton(i),this.mapContainer.appendChild(i)}}else"null"!==this.state?this._clear():null!==t&&null!==r&&(this.state="markers",n.addMarker({lon:t,lat:r}),this._createMarkerCard(t,r))}},{key:"injectInfo",value:function(e){var t=this._infoCard,r=this.state;e&&t&&t.infoID===e.id&&"info"===r&&this._injectInfo(t,e)}},{key:"_createMarkerCard",value:function(e,t){var r=this._markerCard=window.document.createElement("div");r.id="s2-mini-card",r.innerHTML='<div id="s2-mini-card-body">'.concat(e.toFixed(8),", ").concat(t.toFixed(8),"</div>"),this.mapContainer.appendChild(r)}},{key:"_injectInfoSkeleton",value:function(e){var t=this,r=window.document.createElement("div");r.id="s2-card-close-container",r.innerHTML='<div id="s2-card-close"></div>',r.onclick=function(){e.remove(),t._clear()},e.appendChild(r);var n=window.document.createElement("div");n.id="s2-skeleton",n.innerHTML='<div class="s2-skel-container"><div class="s2-skel-header"></div></div><div class="s2-skel-container"><div class="s2-skel-line s2-skel-line-1"></div><div class="s2-skel-line s2-skel-line-2"></div><div class="s2-skel-line s2-skel-line-3"></div></div>',e.appendChild(n),e.skel=n}},{key:"_injectInfo",value:function(e,t){e.skel&&e.skel.remove();var r=window.document.createElement("div");r.id="s2-card-body";var n="",o=t.name,i=t.details,a=i.extract,s=i.wikiLink,c=i.inception,u=i.externalData,l=i.motto,d=i.officialLanguage;s&&(s='<a target="popup" href="'.concat(s,'">Wikipedia</a>')),u&&(u='<a target="popup" href="'.concat(u,'">').concat(u,"</a>")),c&&(c=new Date(c)),d&&(d=d[0]),n+='<div class="s2-card-item s2-card-item-title">'.concat(o,"</div><div class='s2-card-details'>"),a&&(n+='<div class="s2-card-item"><div>'.concat(a).concat(s,"</div></div>")),c&&(n+='<div class="s2-card-item s2-card-item-flex"><div class="s2-card-item-key">Inception: </div><div class="s2-card-item-value">'.concat(k[c.getMonth()]," ").concat(Math.max(c.getDay(),1),", ").concat(c.getFullYear(),"</div></div>")),l&&(n+='<div class="s2-card-item s2-card-item-flex"><div class="s2-card-item-key">Motto: </div><div class="s2-card-item-value">'.concat(l,"</div></div>")),d&&(n+='<div class="s2-card-item s2-card-item-flex"><div class="s2-card-item-key">officialLanguage: </div><div class="s2-card-item-value">'.concat(d,"</div></div>")),u&&(n+='<div class="s2-card-item s2-card-item-flex"><div class="s2-card-item-key">Website: </div><div class="s2-card-item-value">'.concat(u,"</div></div>")),n+="</div>",r.innerHTML=n,e._bod=r,e.appendChild(r)}}])&&w(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function C(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){var t="function"==typeof Map?new Map:void 0;return P=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,R(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),D(n,e)},P(e)}function T(e,t,r){return T=I()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&D(o,r.prototype),o},T.apply(null,arguments)}function I(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&D(e,t)}(l,e);var t,r,o,i,a,s,u=(t=l,r=I(),function(){var e,n=R(t);if(r){var o=R(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return O(this,e)});function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(S(this,l),W(j(e=u.call(this)),"_container",void 0),W(j(e),"_canvasContainer",void 0),W(j(e),"_navigationContainer",void 0),W(j(e),"_canvasMultiplier",void 0),W(j(e),"_canvas",void 0),W(j(e),"_attributionPopup",void 0),W(j(e),"_compass",void 0),W(j(e),"_colorBlind",void 0),W(j(e),"_attributions",{}),W(j(e),"bearing",0),W(j(e),"pitch",0),W(j(e),"colorMode",0),W(j(e),"map",void 0),W(j(e),"offscreen",void 0),W(j(e),"info",void 0),W(j(e),"id",Math.random().toString(36).replace("0.","")),(t=E({canvasMultiplier:window.devicePixelRatio||2,interactive:!0},t)).canvasMultiplier=e._canvasMultiplier=Math.max(2,t.canvasMultiplier||2),"string"==typeof t.container){if(e._container=window.document.getElementById(t.container),!e._container)throw new Error("Container not found.")}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");e._container=t.container}delete t.container;var r=e._canvas=e._setupContainer(t);return e._setupCanvas(r,t),e}return o=l,i=[{key:"_setupContainer",value:function(e){var t=this,r=t._container;r.classList.add("s2-map");var n=t._canvasContainer=window.document.createElement("div");n.className="s2-canvas-container",r.appendChild(n);var o=window.document.createElement("canvas");return o.className="s2-canvas",o.setAttribute("tabindex","0"),o.setAttribute("aria-label","S2Map"),o.width=r.clientWidth*t._canvasMultiplier,o.height=r.clientHeight*t._canvasMultiplier,n.appendChild(o),Array.isArray(e.infoLayers)&&(this.info=new _(this,r,e.infoLayers)),o}},{key:"_setupCanvas",value:(a=y().mark((function e(t,r){var o,i,a,s,u,l,d;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=(o=this)._canvasContainer,a=r.ready,delete r.ready,r.contextType||(s=function(e){return!!document.createElement("canvas").getContext(e)},r.contextType=s("webgpu")?3:s("webgl2")?2:1),navigator.gpu||!t.transferControlToOffscreen){e.next=12;break}u=t.transferControlToOffscreen(),(l=o.offscreen=new c(new URL(n.p+n.u(875),n.b),{name:"map-worker",type:void 0})).onmessage=o._mapMessage.bind(o),l.postMessage({type:"canvas",options:r,canvas:u,id:o.id},[u]),e.next=16;break;case 12:return e.next=14,Promise.all([n.e(115),n.e(14),n.e(225)]).then(n.bind(n,225)).then((function(e){return e.default}));case 14:d=e.sent,o.map=new d(r,t,o.id,o);case 16:this._setupControlContainer(r),!0===r.interactive&&(i.classList.add("s2-interactive"),i.addEventListener("mousemove",o._onCanvasMouseMove.bind(o)),i.addEventListener("contextmenu",o._onCompassMouseDown.bind(o)),void 0!==r.scrollZoom&&!0!==r.scrollZoom||i.addEventListener("wheel",o._onScroll.bind(o)),i.addEventListener("mousedown",o._onMouseDown.bind(o)),i.addEventListener("touchstart",(function(e){return o._onTouch(e,"touchstart")})),i.addEventListener("touchend",(function(e){return o._onTouch(e,"touchend")})),i.addEventListener("touchmove",(function(e){return o._onTouch(e,"touchmove")}))),o._onCanvasReady(a);case 19:case"end":return e.stop()}}),e,this)})),s=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=a.apply(e,t);function i(e){C(o,r,n,i,s,"next",e)}function s(e){C(o,r,n,i,s,"throw",e)}i(void 0)}))},function(e,t){return s.apply(this,arguments)})},{key:"_setupControlContainer",value:function(e){var t=this,r=this._container,n=this._attributions,o=e.attributions,i=e.controls,a=e.zoomController,s=e.compassController,c=e.colorblindController,u=e.darkMode;if(!e.attributionOff){var l=window.document.createElement("div");l.id="s2-attribution";var d=window.document.createElement("div");d.className=d.id="s2-info",u&&d.classList.add("s2-info-dark"),d.onclick=function(){l.classList.toggle("show")};var f=this._attributionPopup=window.document.createElement("div");if(f.className="s2-popup-container",u&&f.classList.add("s2-popup-container-dark"),f.innerHTML='<div>Rendered with ❤ by</div><a href="https://s2maps.io" target="popup"><div class="s2-jolly-roger"></div></a>',o)for(var p in o)n[p]||(n[p]=o[p],f.innerHTML+='<div><a href="'.concat(o[p],'" target="popup">').concat(p,"</a></div>"));l.appendChild(d),l.appendChild(f),r.appendChild(l)}if(!1!==i){var v,h=this._navigationContainer=window.document.createElement("div");if(h.className="s2-nav-container",u&&h.classList.add("s2-nav-dark"),r.appendChild(h),!1!==a){var y=window.document.createElement("button");y.className="s2-control-button s2-zoom-plus",y.setAttribute("aria-hidden",!0),y.tabIndex=-1,h.appendChild(y),y.addEventListener("click",(function(){return t._navEvent("zoomIn")})),(v=window.document.createElement("div")).className="s2-nav-sep"+(u?"-dark":""),h.appendChild(v);var m=window.document.createElement("button");m.className="s2-control-button s2-zoom-minus",m.setAttribute("aria-hidden",!0),m.tabIndex=-1,h.appendChild(m),m.addEventListener("click",(function(){return t._navEvent("zoomOut")}))}if(!1!==s){(v=window.document.createElement("div")).className="s2-nav-sep"+(u?"-dark":""),h.appendChild(v);var g=window.document.createElement("button");g.className="s2-control-button",g.setAttribute("aria-hidden",!0),g.tabIndex=-1,h.appendChild(g);var w=this._compass=window.document.createElement("div");w.className="s2-compass",w.setAttribute("aria-hidden",!0),w.tabIndex=-1,g.appendChild(w),g.addEventListener("mousedown",this._onCompassMouseDown.bind(this))}if(!1!==c){(v=window.document.createElement("div")).className="s2-nav-sep"+(u?"-dark":""),h.appendChild(v);var b=this._colorBlind=window.document.createElement("button");b.className="s2-control-button s2-colorblind-button",b.id="s2-colorblind-default",b.setAttribute("aria-hidden",!0),b.tabIndex=-1,h.appendChild(b),b.addEventListener("click",this._setColorMode.bind(this))}}}},{key:"injectData",value:function(e){var t=this.map,r=this.offscreen;if("attributions"===e.type)this._addAttributions(e.attributions);else if("info"===e.type)this.info&&this.info.injectInfo(e.json);else if(r){var n=e.type;"fill"===n?r.postMessage(e,[e.vertexBuffer,e.indexBuffer,e.fillIDBuffer,e.codeTypeBuffer,e.featureGuideBuffer]):"line"===n?r.postMessage(e,[e.vertexBuffer,e.featureGuideBuffer]):"glyph"===n?r.postMessage(e,[e.glyphFilterBuffer,e.glyphQuadBuffer,e.glyphColorBuffer,e.featureGuideBuffer]):"glyphimages"===n?r.postMessage(e,e.images.map((function(e){return e.data}))):"raster"===n?r.postMessage(e,[e.image]):"mask"===n?r.postMessage(e,[e.vertexBuffer,e.indexBuffer,e.radiiBuffer]):"point"===n||"heatmap"===n?r.postMessage(e,[e.vertexBuffer,e.weightBuffer,e.featureGuideBuffer]):"interactive"===n?r.postMessage(e,[e.interactiveGuideBuffer,e.interactiveDataBuffer]):r.postMessage(e)}else t&&t.injectData(e)}},{key:"_mapMessage",value:function(e){var t=e.data,r=t.mapID,n=t.type;if("tilerequest"===n)window.S2WorkerPool.tileRequest(r,t.tiles,t.sources);else if("timerequest"===n)window.S2WorkerPool.timeRequest(r,t.tiles,t.sourceNames);else if("mouseenter"===n){var o=t.feature;o&&(this._canvas.style.cursor=o.__cursor||"default",this.dispatchEvent(new CustomEvent("mouseenter",{detail:o})))}else if("mouseleave"===n){var i=t.feature;this._canvas.style.cursor="default",i&&this.dispatchEvent(new CustomEvent("mouseleave",{detail:i})),this.dispatchEvent(new CustomEvent("mouseleave",{detail:i}))}else if("click"===n){var a=t.feature,s=t.lon,c=t.lat;this.info&&this.info.click(a,s,c),this.dispatchEvent(new CustomEvent("click",{detail:{feature:a,lon:s,lat:c}}))}else if("pos"===n){var u=t.zoom,l=t.lon,d=t.lat;this.dispatchEvent(new CustomEvent("pos",{detail:{zoom:u,lon:l,lat:d}}))}else"requestStyle"===n?window.S2WorkerPool.requestStyle(r,t.style,t.apiKey,t.analytics):"style"===n?window.S2WorkerPool.injectStyle(r,t.style):"updateCompass"===n?this._updateCompass(t.bearing,t.pitch):"addLayer"===n?window.S2WorkerPool.addLayer(r,t.layer,t.index,t.tileRequest):"removeLayer"===n?window.S2WorkerPool.removeLayer(r,t.index):"reorderLayers"===n?window.S2WorkerPool.reorderLayers(r,t.layerChanges):"screenshot"===n&&this.dispatchEvent(new CustomEvent("screenshot",{detail:t.screen}))}},{key:"_onCanvasReady",value:function(e){"ResizeObserver"in window?new ResizeObserver(this._resize.bind(this)).observe(this._container):window.addEventListener("resize",this._resize.bind(this)),window.S2WorkerPool.addMap(this),"function"==typeof e&&e(this)}},{key:"_addAttributions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._attributionPopup,r=this._attributions;if(t)for(var n in e)r[n]||(r[n]=e[n],t.innerHTML+='<div><a href="'.concat(e[n],'" target="popup">').concat(n,"</a></div>"))}},{key:"_onTouch",value:function(e,t){var r=this.map,n=this.offscreen,o=this._canvasContainer,i=this._canvasMultiplier;e.preventDefault();for(var a=e.touches,s=a.length,c={length:s},u=0;u<s;u++){var l=a[u],d=l.clientX,f=l.clientY,p=l.pageX,v=l.pageY,h=(p-o.offsetLeft)*i,y=(v-o.offsetTop)*i;c[u]={clientX:d,clientY:f,x:h,y}}n?n.postMessage({type:t,touchEvent:c}):r&&("touchstart"===t?r.onTouchStart(c):"touchend"===t?r.dragPan.onTouchEnd(c):"touchmove"===t&&r.dragPan.onTouchMove(c))}},{key:"_onScroll",value:function(e){e.preventDefault();var t=this.map,r=this.offscreen,n=e.clientX,o=e.clientY,i=e.deltaY,a=this._canvas.getBoundingClientRect();r?r.postMessage({type:"scroll",rect:a,clientX:n,clientY:o,deltaY:i}):t&&t._onZoom(i,n-a.left,o-a.top)}},{key:"_onMouseDown",value:function(e){if(0===e.button){var t=this,r=t.map,n=t.offscreen;n?n.postMessage({type:"mousedown"}):r&&r.dragPan.onMouseDown();var o=t._onMouseMove.bind(t);window.addEventListener("mousemove",o),window.addEventListener("mouseup",(function(e){var i=t._canvas.getBoundingClientRect(),a=e.clientX,s=e.clientY;window.removeEventListener("mousemove",o),n?n.postMessage({type:"mouseup",clientX:a,clientY:s,rect:i}):r&&r.dragPan.onMouseUp(a-i.left-i.width/2,i.height/2-s-i.top)}),{once:!0})}}},{key:"_onMouseMove",value:function(e){var t=this.map,r=this.offscreen,n=e.movementX,o=e.movementY;r?r.postMessage({type:"mousemove",movementX:n,movementY:o}):t&&t.dragPan.onMouseMove(n,o)}},{key:"_onCanvasMouseMove",value:function(e){var t=this.map,r=this.offscreen,n=this._canvasMultiplier,o=e.layerX*n,i=e.layerY*n;r?r.postMessage({type:"canvasmousemove",x:o,y:i}):t&&t.onCanvasMouseMove(o,i)}},{key:"_updateCompass",value:function(e,t){this.bearing=-e,this.pitch=t,this._compass&&(this._compass.style.transform="translate(-50%, -50%) rotate(".concat(this.bearing,"deg)"))}},{key:"_onCompassMouseDown",value:function(e){e.preventDefault();var t=this.map,r=this.offscreen,n=Math.abs,o=0,i=0,a=function(e){var a=e.movementX,s=e.movementY;0!==a&&(o+=n(a),i+=n(s),r?r.postMessage({type:"updateCompass",bearing:a}):t&&t.updateCompass(a))};window.addEventListener("mousemove",a),window.addEventListener("mouseup",(function(){window.removeEventListener("mousemove",a),o||i?r?r.postMessage({type:"mouseupCompass"}):t.mouseupCompass():r?r.postMessage({type:"resetCompass"}):t.resetCompass()}),{once:!0})}},{key:"_onCompassClick",value:function(){var e=this.map,t=this.offscreen;t?t.postMessage({type:"resetCompass"}):e.resetCompass()}},{key:"_resize",value:function(){var e=this.map,t=this.offscreen,r=this._container,n=this._canvasMultiplier;t?t.postMessage({type:"resize",width:r.clientWidth*n,height:r.clientHeight*n}):e&&e.resize(r.clientWidth*n,r.clientHeight*n)}},{key:"_navEvent",value:function(e){var t=this.map,r=this.offscreen;r?r.postMessage({type:"nav",ctrl:e}):t&&t.navEvent(e)}},{key:"_setColorMode",value:function(){var e=this.map,t=this.offscreen,r=this._colorBlind;this.colorMode++,this.colorMode>3&&(this.colorMode=0);var n=this.colorMode;r.id="s2-colorblind".concat(0===n?"-default":1===n?"-proto":2===n?"-deut":"-trit"),t?t.postMessage({type:"colorMode",mode:n}):e&&e.colorMode(n)}},{key:"delete",value:function(){var e=this.offscreen,t=this.map,r=this._canvas,n=this._container;for(e?(e.postMessage({type:"delete"}),e.terminate()):t&&t.delete(),window.S2WorkerPool.delete(),r.replaceWith(r.cloneNode(!0));n.lastChild;)n.removeChild(n.lastChild)}},{key:"getContainer",value:function(){return this._container}},{key:"getCanvasContainer",value:function(){return this._canvasContainer}},{key:"getContainerDimensions",value:function(){return this._container?[this._container.clientWidth,this._container.clientHeight]:null}},{key:"setStyle",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=this.offscreen,n=this.map;r?r.postMessage({type:"setStyle",style:e,ignorePosition:t}):n&&n.setStyle(e,t)}},{key:"updateStyle",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"updateStyle",style:e}):r&&r.updateStyle(e)}},{key:"setMoveState",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"moveState",state:e}):r&&r.setMoveState(e)}},{key:"setZoomState",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"zoomState",state:e}):r&&r.setZoomState(e)}},{key:"jumpTo",value:function(e,t,r){var n=this.offscreen,o=this.map;n?n.postMessage({type:"jumpTo",lon:e,lat:t,zoom:r}):o&&o.jumpTo(e,t,r)}},{key:"easeTo",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"easeTo",directions:e}):r&&r.animateTo("easeTo",e)}},{key:"flyTo",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"flyTo",directions:e}):r&&r.animateTo("flyTo",e)}},{key:"getInfo",value:function(e){window.S2WorkerPool.getInfo(this.id,e),this.resetSource("_info",!0)}},{key:"addSource",value:function(e,t){this.updateSource(e,t,!1,!1)}},{key:"updateSource",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.resetSource([e,t],r,n)}},{key:"resetSource",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.offscreen,o=this.map;Array.isArray(e)||(e=[e]),Array.isArray(e[0])||(e=[e]),n?n.postMessage({type:"resetSource",sourceNames:e}):o&&o.resetSource(e,t,r)}},{key:"deleteSource",value:function(e){var t=this.offscreen,r=this.map;Array.isArray(e)||(e=[e]),window.S2WorkerPool.deleteSource(this.id,e),t?t.postMessage({type:"clearSource",sourceNames:e}):r&&r.clearSource(e)}},{key:"addLayer",value:function(e,t){var r=this.offscreen,n=this.map;r?r.postMessage({type:"addLayer",layer:e,nameIndex:t}):n&&n.addLayer(e,t)}},{key:"updateLayer",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=this.offscreen,o=this.map;n?n.postMessage({type:"updateLayer",layer:e,nameIndex:t,fullUpdate:r}):o&&o.updateLayer(e,t,r)}},{key:"removeLayer",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"removeLayer",nameIndex:e}):r&&r.removeLayer(e)}},{key:"reorderLayers",value:function(e){var t=this.offscreen,r=this.map;t?t.postMessage({type:"reorderLayers",layerChanges:e}):r&&r.reorderLayers(e)}},{key:"addMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_markers";Array.isArray(e)||(e=[e]),window.S2WorkerPool.addMarkers(this.id,e,t),this.resetSource(t,!0,!0)}},{key:"removeMarker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_markers";Array.isArray(e)||(e=[e]),window.S2WorkerPool.removeMarkers(this.id,e,t),this.resetSource(t,!0,!1)}},{key:"screenshot",value:function(){var e=this,t=e.offscreen,r=e.map;return new Promise((function(n){e.addEventListener("screenshot",(function(e){n(e.detail)}),{once:!0}),t?t.postMessage({type:"screenshot"}):r&&r.screenshot()}))}}],i&&x(o.prototype,i),Object.defineProperty(o,"prototype",{writable:!1}),l}(P(EventTarget));window&&(window.S2Map=N)})()})();